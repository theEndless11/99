{"version":3,"sources":["posts.js"],"names":["_mongoose","_interopRequireDefault","require","_db","postSchema","mongoose","Schema","message","String","timestamp","Date","username","sessionId","Post","model","handler","req","res","posts","regeneratorRuntime","async","_context","prev","next","method","awrap","connectToDatabase","find","sort","sent","json","t0","status","error","stop"],"mappings":"4FAAA,IAAAA,UAAAC,uBAAAC,QAAA,aACAC,IAAAD,QAAA,0FAEA,IAAME,WAAa,IAAIC,UAAAA,QAASC,OAAO,CACnCC,QAASC,OACTC,UAAWC,KACXC,SAAUH,OANdI,UAAAJ,SACAK,KAAAR,UAAAA,QAAAS,MAAA,OAAAV,YAUe,SAAeW,QAAQC,EAAKC,GAA5B,IAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,GACQ,QAAfP,EAAIQ,OADG,OAAAH,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAAAJ,mBAAAM,OARwB,EAAAtB,IAAAuB,sBAQxBL,EAAAE,KAAA,GAAA,MAAA,KAAA,EAAA,OAAAF,EAAAE,KAAA,EAAAJ,mBAAAM,MARwBZ,KAAAc,OAAAC,KAAA,CAAAnB,WAAA,KAQxB,KAAA,EARwBS,EAQxBG,EAAAQ,KALDrB,EAAAA,OAHyB,KAAAsB,KAAAZ,GAQxBG,EAAAE,KAAA,GAAA,MAAA,KAAA,GAAAF,EAAAC,KAAA,GAAAD,EAAAU,GAAAV,EAAA,MAAA,GARfJ,EAAAe,OAAA,KAAAF,KAAA,CAAAvB,QAAA,yBAAA0B,MAAAZ,EAAAU,KAQe,KAAA,GAAAV,EAAAE,KAAA,GAAA,MAAA,KAAA,GAUPN,EAAIe,OAAO,KAAKF,KAAK,CAAEvB,QAAS,uBAVzB,KAAA,GAAA,IAAA,MAAA,OAAAc,EAAAa,SAAA,KAAA,KAAA,CAAA,CAAA,EAAA","file":"posts.min.js","sourcesContent":["import mongoose from 'mongoose';\r\nimport { connectToDatabase } from '../../utils/db';\r\n\r\nconst postSchema = new mongoose.Schema({\r\n    message: String,\r\n    timestamp: Date,\r\n    username: String,\r\n    sessionId: String,\r\n});\r\nconst Post = mongoose.model('Post', postSchema);\r\n\r\nexport default async function handler(req, res) {\r\n    if (req.method === 'GET') {\r\n        try {\r\n            await connectToDatabase();\r\n            const posts = await Post.find().sort({ timestamp: -1 });\r\n            res.status(200).json(posts);\r\n        } catch (error) {\r\n            res.status(500).json({ message: 'Error retrieving posts', error });\r\n        }\r\n    } else {\r\n        res.status(405).json({ message: 'Method Not Allowed' });\r\n    }\r\n}\r\n"]}